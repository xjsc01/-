# 3.1虚拟化技术

> created by xjsc01

## 虚拟化技术介绍

### 云计算的技术特点

> 虚拟化技术是构建云计算平台的一项关键技术。

1. **虚拟化**:
   - 云计算使用虚拟化技术，允许多个虚拟计算机实例在单个物理服务器上运行。这提高了资源利用率和灵活性，使资源能够更好地共享和分配。
     同时虚拟化还可以把多个计算机虚拟为一个计算机。
2. **超大规模**:
   - 云计算平台通常能够支持大规模的计算、存储和网络资源，以满足不同规模和需求的用户。这意味着它可以扩展到处理数百万甚至数十亿的用户和工作负载。
3. **基于互联网**:
   - 云计算是通过互联网提供的，允许用户**从任何地方通过互联网访问云服务**。这种便捷性和全球性是云计算的一个重要特点。
4. **高可扩展性**:
   - 云计算平台具有高度可扩展性，可以根据需求**动态扩展或缩减计算资源**。这意味着用户可以根据工作负载的变化调整资源，避免资源浪费。
     （随时可以参加、缩减资源，避免浪费）
5. **按需服务**:
   - 云计算提供按需服务模型，用户只需支付他们实际使用的资源，而无需提前购买硬件或长期承诺。这降低了成本，并增加了灵活性。
6. **通用性**:
   - 云计算平台通常**提供多种不同类型的服务**，包括计算、存储、数据库、人工智能等。这使得它能够满足各种应用和工作负载的需求。
7. **高可靠性**:
   - 云计算提供高度可靠的基础设施，包括数据**冗余、备份和容错**机制，以确保数据的安全性和可用性。这使得云计算适用于关键业务应用。

### 虚拟化技术

#### 定义

虚拟化技术的核心思想是利用**软件**或**固件管理程序**构成虚拟化层，把物理资源映射为虚拟资源。 在虚拟资源上可以安装和部署多个虚拟机， 实现多用户共享物理资源。

虚拟化，是资源的抽象：

- 单一物理资源的多个逻辑表示
- 多个物理资源的单一逻辑表示

![image-20240105162941706](3.1-虚拟化技术.assets/image-20240105162941706.png)

名词解释：

- **VMM（Virtual Machine Monitor）**是一种通用术语，用于描述虚拟机监视器，它负责创建、管理和监控虚拟机。
- **Hypervisor**是一种特殊类型的虚拟机监视器，通常是硬件虚拟化技术的一部分。它直接运行在物理硬件上，负责虚拟机的创建和管理。有两种类型：
  - Type 1（直接运行）
  - Type 2（运行在宿主操作系统上）

![image-20240105163324091](3.1-虚拟化技术.assets/image-20240105163324091.png)

#### 虚拟化的特点

1. **分区 (Partitioning):** 虚拟化允许将物理计算资源（如CPU、内存、存储）分成多个虚拟部分，每个部分称为分区。每个分区可以被视为一个独立的虚拟计算机，拥有自己的操作系统和应用程序。这使得多个用户或应用程序能够共享同一台物理计算机，而不会相互干扰。
   （易于共享）
2. **隔离 (Isolation):** 隔离是虚拟化的关键特性之一。它确保在不同的虚拟环境中运行的操作系统和应用程序互不干扰。这意味着如果一个虚拟环境中的应用程序崩溃或发生故障，不会影响其他虚拟环境的稳定性。这提高了系统的可靠性和安全性。
   （一个崩溃了另一个还可以用）
3. **封装 (Encapsulation):** 封装指的是将一个虚拟环境的所有组件，包括操作系统、应用程序和配置信息，打包成一个单独的虚拟机镜像或容器。这使得虚拟机可以轻松地在不同的物理主机上迁移和部署，而不需要重新配置和安装软件。封装也有助于保持环境的一致性。
   （易于迁移、部署 eg. VMWARE可以导出虚拟机）
4. **独立 (Independence):** 虚拟化环境是相互独立的，它们彼此不受影响。这意味着一个虚拟环境的变化不会影响其他环境。每个虚拟环境都有自己的资源分配和运行环境，因此它们是相对独立的计算单元。
   （虚拟环境是独立的，不会互相影响）

#### 低级 VMM 操作 

1. **多路复用（Multiplexing - 复用）：** 多路复用是指在多个虚拟机（VM）之间共享物理资源，例如CPU或内存的过程。
2. **挂起（Suspend - 暂停）：** 挂起虚拟机涉及将其当前状态保存到磁盘上，并在当前执行点暂停它。
3. **恢复/供应（Resume/Provision - 恢复/供应）：** 恢复是指重新启动挂起的虚拟机，使其继续运行。虚拟机从挂起状态恢复后，可以继续执行其之前的任务。
4. **动态迁移（Migration ）**它允许将虚拟机（VM）从一个物理主机迁移到另一个物理主机，而不中断虚拟机的运行。

#### 为什么需要虚拟机

1. 资源利用率严重不足的情况（全球数据中心中包含的1180万台服务器其CPU平均利用率只有15%）
2. 因为当前操作系统的机制，**不能为当前应用的运行   行提供行之有效的隔离环境**，影响了资源共享，进而导致旧服务器计算能力没有完全利用， 新应用必须  购买新服务器
   - 文件系统隔离（依赖文件在磁盘的位置、内容、版本等，可能 与其它软件造成冲突）
   - 网络隔离（网卡、 协议栈、 IP地址、端口等等，这些依赖资源可能与其他 软件发生冲突）
   - 管理域隔离（应用的运行和维护往往需要高安全权限，难以对管理 员的管理范围进行限制，难以对应用使用的资源进行访 问控制）

> 随着云计算的发展，传统的数据中心逐渐过渡到虚拟化数据中心，即采用虚拟化技术将原来数据中心的物理资源进行抽 象整合。

#### 虚拟化的优势

1. 整合资源，提高资源的利用率（复用），实现资源的动态分配和调度,提高现有资源的利用率和服务可靠性
2. 简化资源使用的复杂度,更快、更方便部署系统（封装）
3. 简化资源管理,提供自动的资源分配、回收方式 
4. 提供统一的安全、备份、容灾方案
5. 方便系统升级、迁移和改造

## 虚拟化技术发展简史